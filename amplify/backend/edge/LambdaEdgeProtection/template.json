{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Stack containing authentication lambda functions",
    "Transform": "AWS::Serverless-2016-10-31",
    "Parameters": {
    "env": {
        "Type": "String"
    },
    "hostingS3AndCloudFrontCloudFrontDomainName": {
        "Type": "String"
    }
    },
    "Resources": {
    "LambdaEdgeProtection": {
        "Type": "AWS::Serverless::Application",
        "Properties": {
        "Location": {
            "ApplicationId": "arn:aws:serverlessrepo:us-east-1:520945424137:applications/cloudfront-authorization-at-edge",
            "SemanticVersion": "1.2.1"
        },
        "Parameters": {
            "CreateCloudFrontDistribution": "false",
            "AlternateDomainNames":  { "Ref" : "hostingS3AndCloudFrontCloudFrontDomainName" },
            "HttpHeaders" : "{ \"Content-Security-Policy\": \"default-src 'none'; img-src 'self' data: blob:; script-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'none'; connect-src 'self' https:\/\/*.amazonaws.com https:\/\/*.amazoncognito.com\", \"Strict-Transport-Security\": \"max-age=31536000; includeSubdomains; preload\", \"Referrer-Policy\": \"same-origin\", \"X-XSS-Protection\": \"1; mode=block\", \"X-Frame-Options\": \"DENY\", \"X-Content-Type-Options\": \"nosniff\" }"
        }
        }
    }
    }
}